<html> 
    <link rel="stylesheet" href="../CSS/style.css">
    <!-- google fonts -->
<link href="https://fonts.googleapis.com/css2?family=Mooli&display=swap" rel="stylesheet"> 
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <body>
<section class="form_section">
    <div class="container form_section-container">
<h2>Sign In</h2>
<div class="alert_message success">
    <p id="err">This is a success message.</p>
</div>
<form id="form1">
    <input type="email" name="Email" placeholder="Email">
    <input type="password" name="Password" placeholder="Password">
    
<button type="submit" class="btn">Sign In</button>
<small>Don't have an account?<a href="signup.html">Sign Up</a></small>

</form>
<script
src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"
integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ=="
crossorigin="anonymous"
referrerpolicy="no-referrer"
></script>
<script>
    // const axios=require('axios')
    const form=document.querySelector('#form1')
    form.addEventListener('submit',(e)=>{
    e.preventDefault()
    const formData=new FormData(form)
    const data=Object.fromEntries(formData)
    // console.log("Body to be sent: ",data);
    axios.post('../users/signin',data).then(response=>{ 
        if(response.status===200){  
            document.querySelector('#err').textContent="User Logged Successfully"
            window.location.href='../'
            }
   
        
}).catch(err=>{
   if(err.response.status===400){

                document.querySelector('.alert_message').style.display='block'   
    document.querySelector('#err').textContent="Invalid Email or Password" 
        
   }
   else if(err.response.status===500){
    
    document.querySelector('.alert_message').style.display='block'   
    document.querySelector('#err').textContent="An Internal Sever Error Sorry" }

})
}) 
</script>
    </div>
</section>
</body>

</html>