<html> 
    <link rel="stylesheet" href="../CSS/style.css">
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">
    <!-- google fonts -->
<link href="https://fonts.googleapis.com/css2?family=Mooli&display=swap" rel="stylesheet"> 

    <body>
        <nav>
            <div class="container nav_container">
                <a href="/" class="nav_logo">BLOG</a>
                <ul class="nav_items">
                    <li> <a href="/blog">Blog</a></li>
                    <li> <a href="about.html">About</a></li>
                    <li> <a href="services.html">Services</a></li>
                    <li> <a href="contact.html">Contact</a></li>
                    <!-- <li href="blog.html">Signin</li> -->
                    <li class ="nav_profile">
                        <div class="avatar">
                            <img src="./images/avatar1.jpg" alt="">
                        </div>
                        <ul>
                            <li><a href="dashboard.html">Dashboard</a></li>
                            <li><a href="logout.html">Logout</a></li>
                        </ul>
                    </li>
                </ul>
                <button id="open_nav-btn"><i class="uil uil-bars"></i></button>
                <button id="close_nav-btn"><i class="uil uil-multiply"></i></button>
            </div> 
        </nav>



<section class="form_section">
    <div class="container form_section-container">
<h2>Add Post</h2>
<div class="alert_message error">
    <p>This is an error message.</p>
</div>
<form  id="form" enctype="multipart/form-data">
    <input type="text" name="Title" placeholder="Title">
    <textarea rows="10" name="Body" placeholder="Body"></textarea>
    <select name="CategoryId">
        <%categos.forEach(cat=>{%>
                <option value="<%=cat._id%>"><%=cat.Title%></option>
               <%})%>
            </select>

    <div class="form_control inline">
        <input type="checkbox" name="isFeatured"  id="is_featured">
        <label for="is_featured" >Featured</label>
    </div>
    <div class="form_control">
        <label for="thumbnail">Add Thumbnail</label>
        <input type="file" name="Thumbnail" id="thumbnail">
    </div>
<button type="submit" class="btn">Add Post</button>

</form>
    </div>
</section>




<footer>
    <div class="footer_socials">
        <a href="https://youtube.com/OurBlog" target="_blank"><i class="uil uil-youtube"></i></a>
        <a href="https://facebook.com/OurBlog" target="_blank"><i class="uil uil-facebook"></i></a>
        <a href="https://instagram.com/OurBlog" target="_blank"><i class="uil uil-instagram"></i></a>
        <a href="https://linkedin.com/OurBlog" target="_blank"><i class="uil uil-linkedin"></i></a>
        <a href="https://twitter.com/OurBlog" target="_blank"><i class="uil uil-twitter"></i></a>

    </div>
    <div class="container footer_container">
<article>
    <h4>Categories</h4>
    <ul>
        <li><a href="">Art</a></li>
        <li><a href="">Wild Life </a></li>
        <li><a href="">Travel</a></li>
        <li><a href="">Music</a></li>
        <li><a href="">Science&Technology</a></li>
        <li><a href="">Food</a></li>
    </ul>
</article>
<article>
    <h4>Support</h4>
    <ul>
        <li><a href="">Online Support</a></li>
        <li><a href="">Call Numbers</a></li>
        <li><a href="">Emails</a></li>
        <li><a href="">Social Support</a></li>
        <li><a href="">Location</a></li>
    </ul>
</article>
<article>
    <h4>Blog</h4>
    <ul>
        <li><a href="">Safety</a></li>
        <li><a href="">Repair </a></li>
        <li><a href="">Recent</a></li>
        <li><a href="">Popular</a></li>
        <li><a href="">Categories</a></li>
    </ul>
</article>
<article>
    <h4>Permalinks</h4>
    <ul>
        <li><a href="">Home</a></li>
        <li><a href="">Blog</a></li>
        <li><a href="">Abou</a></li>
        <li><a href="">Services</a></li>
        <li><a href="">Contact</a></li>
        
    </ul>
</article>
    </div>
<div class="footer_copyright">
    <small>Copyright &copy;@2023 OurBlog Football Club</small>
</div>
</footer>
<script>
  
    var form=document.getElementById('form')
    form.addEventListener('submit',()=>{
        event.preventDefault();
        const formData=new FormData(form)
    const data=Object.fromEntries(formData)
    data.Thumbnail=data.Thumbnail.name
    if(!data.Thumbnail){
        delete data.Thumbnail
    }
    if(data.isFeatured)
    data.isFeatured=true


    
    fetch('/dashboard/add/save/',{
method:'post',
headers:{"Content-Type":'application/json'},
body:JSON.stringify(data)
}).then(response=>{console.log("Successful and back");
    if(response.status==200){
    // console.log("Successful");
    window.location.href='/dashboard'


    }
else
console.log("Not On the Process because of lack of 200");
}).catch(ex=>{console.log("Rejected fetch "+ex.message);
    })
    })
</script>
</body>
</html>